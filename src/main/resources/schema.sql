-- Remove file when DB is created
CREATE SCHEMA IF NOT EXISTS FLEX_IMDB;
SET SCHEMA FLEX_IMDB;
CREATE TABLE IF NOT EXISTS ACTORS
(
    ID        INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    FIRSTNAME VARCHAR(100)                             NOT NULL,
    LASTNAME  VARCHAR(100)                             NOT NULL,
    CONSTRAINT ACTOR_PK_CONSTRAINT PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS MOVIES
(
    ID    INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    TITLE VARCHAR(200)                             NOT NULL,
    GENRE VARCHAR(50)                              NOT NULL,
    CONSTRAINT MOVIES_PK_CONSTRAINT PRIMARY KEY (ID)
);
CREATE TABLE IF NOT EXISTS ACTORS_MOVIES
(
    ACTOR_ID INTEGER NOT NULL,
    MOVIE_ID INTEGER NOT NULL,
    CONSTRAINT ACTORS_MOVIES_PK_CONSTRAINT PRIMARY KEY (ACTOR_ID, MOVIE_ID),
    CONSTRAINT ACTOR_FK_CONSTRAINT FOREIGN KEY (ACTOR_ID) REFERENCES MOVIES (ID),
    CONSTRAINT MOVIE_FK_CONSTRAINT FOREIGN KEY (MOVIE_ID) REFERENCES ACTORS (ID)
);